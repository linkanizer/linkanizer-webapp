<nav class="navbar navbar-expand-md navbar-dark bg-dark fixed-top">
  <div class="container">
    <a class="navbar-brand"
       routerLink="/">
      Linkanizer
    </a>

    <ul class="navbar-nav mr-auto">
      <li class="nav-item">
        <a class="nav-link"
           routerLink="/">
          Home
        </a>
      </li>
      <li *ngIf="loggedIn$ | async"
          class="nav-item">
        <a class="nav-link"
           routerLink="/dashboard/">
          Dashboard
        </a>
      </li>
      <li class="nav-item">
        <a class="nav-link"
           routerLink="/about">
          About
        </a>
      </li>
    </ul>
    <ul *ngIf="loggedIn$ | async ; else login"
        class="navbar-nav">
      <li>
        <a class="btn btn-secondary"
           routerLink="/"
           (click)="logout()">
          Logout
        </a>
      </li>
    </ul>
    <ng-template #login>
      <form
        class="form-inline my-2 my-lg-0"
        (ngSubmit)="request_login_email()">
        <input class="form-control mr-sm-2"
               [formControl]="emailControl"
               name="email"
               type="email"
               placeholder="Email"
               aria-label="Email">
        <button class="btn btn-secondary my-2 my-sm-0"
                [disabled]="!emailControl.valid || (authLoading$ | async)"
                type="submit">

          <span *ngIf="!(authLoading$ | async)">
            Login
          </span>

          <span *ngIf="authLoading$ | async">
            <i class="fa fa-gear fa-spin"></i>
          </span>
        </button>
      </form>
    </ng-template>
  </div>
</nav>
